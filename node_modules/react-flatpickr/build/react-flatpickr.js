"use strict";var g=Object.defineProperty;var k=(o,s,e)=>s in o?g(o,s,{enumerable:!0,configurable:!0,writable:!0,value:e}):o[s]=e;var c=(o,s,e)=>k(o,typeof s!="symbol"?s+"":s,e);const y=require("react/jsx-runtime"),v=require("react"),n=require("prop-types"),O=require("flatpickr"),u=["onChange","onOpen","onClose","onMonthChange","onYearChange","onReady","onValueUpdate","onDayCreate"],p=n.oneOfType([n.func,n.arrayOf(n.func)]),A=["onCreate","onDestroy"],C=n.func;class d extends v.Component{constructor(){super(...arguments);c(this,"createFlatpickrInstance",()=>{let e={onClose:()=>{this.node.blur&&this.node.blur()},...this.props.options};e=f(e,this.props),this.flatpickr=O(this.node,e),this.props.hasOwnProperty("value")&&this.flatpickr.setDate(this.props.value,!1);const{onCreate:t}=this.props;t&&t(this.flatpickr)});c(this,"destroyFlatpickrInstance",()=>{const{onDestroy:e}=this.props;e&&e(this.flatpickr),this.flatpickr&&this.flatpickr.destroy(),this.flatpickr=null});c(this,"handleNodeChange",e=>{this.node=e,this.flatpickr&&(this.destroyFlatpickrInstance(),this.createFlatpickrInstance())})}componentDidUpdate(e){let{options:t}=this.props,l=e.options;t=f(t,this.props),l=f(l,e);const h=Object.getOwnPropertyNames(t);for(let i=h.length-1;i>=0;i--){const r=h[i];let a=t[r];a.toString()!==l[r].toString()&&(u.indexOf(r)!==-1&&!Array.isArray(a)&&(a=[a]),this.flatpickr.set(r,a))}this.props.hasOwnProperty("value")&&!(this.props.value&&Array.isArray(this.props.value)&&e.value&&Array.isArray(e.value)&&this.props.value.every((i,r)=>{e[r]}))&&this.props.value!==e.value&&this.flatpickr.setDate(this.props.value,!1)}componentDidMount(){this.createFlatpickrInstance()}componentWillUnmount(){this.destroyFlatpickrInstance()}render(){const{options:e,defaultValue:t,value:l,children:h,render:i,...r}=this.props;return u.forEach(a=>{delete r[a]}),A.forEach(a=>{delete r[a]}),i?i({...r,defaultValue:t,value:l},this.handleNodeChange):e.wrap?y.jsx("div",{...r,ref:this.handleNodeChange,children:h}):y.jsx("input",{...r,defaultValue:t,ref:this.handleNodeChange})}}c(d,"propTypes",{defaultValue:n.string,options:n.object,onChange:p,onOpen:p,onClose:p,onMonthChange:p,onYearChange:p,onReady:p,onValueUpdate:p,onDayCreate:p,onCreate:C,onDestroy:C,value:n.oneOfType([n.string,n.array,n.object,n.number]),children:n.node,className:n.string,render:n.func}),c(d,"defaultProps",{options:{}});function f(o,s){const e={...o};return u.forEach(t=>{if(s.hasOwnProperty(t)){e[t]&&!Array.isArray(e[t])?e[t]=[e[t]]:e[t]||(e[t]=[]);const l=Array.isArray(s[t])?s[t]:[s[t]];e[t].push(...l)}}),e}module.exports=d;
